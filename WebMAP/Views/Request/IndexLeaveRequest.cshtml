<div class="m-portlet m-portlet--mobile">
    <div class="m-portlet__head">
        <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
                <h3 class="m-portlet__head-text">
                    Leave Requests List
                </h3>
            </div>
        </div>
        <div class="m-portlet__head-tools">
            <ul class="m-portlet__nav">
                @if (Session["role"] == "Resource")
                {
                    <li class="m-portlet__nav-item">
                        <a href="@Url.Action("CreateLeaveRequest", "Request")" class="btn btn-accent m-btn m-btn--custom m-btn--pill m-btn--icon m-btn--air">
                            <span>
                                <i class="la la-plus"></i>
                                <span>Send New Leave Request</span>
                            </span>
                        </a>
                    </li>
                }
                @if (Session["role"] == "Admin")
                {
                    <li class="m-portlet__nav-item">
                        <a href="@Url.Action("IndexArchivedLeaveRequest", "Request")" class="btn btn-danger">
                            <span>
                                <span>Show Archived Leave Requests</span>
                            </span>
                        </a>
                    </li>
                }
            </ul>
        </div>
    </div>
    <div class="m-portlet__body">

        <!--begin: Datatable -->
        <table class="table table-striped- table-bordered table-hover table-checkable" id="m_table_1">
            <thead>
                <tr>
                    <th>Resource</th>
                    <th>Cause</th>
                    <th>From</th>
                    <th>To</th>
                    <th>Description</th>
                    <th>Deposit Date</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @if (ViewBag.result != null)
                {
                    foreach (var lr in ViewBag.result)
                    {
                        <tr>
                            <td>
                                @if (lr.resource != null)
                                {
                                    @(lr.resource.firstName + " " + lr.resource.lastName)
                                }
                            </td>
                            <td>@lr.leaveType.name</td>
                            <td>@lr.fromDate</td>
                            <td>@lr.toDate</td>
                            <td>
                                <a tabindex="0" class="btn btn-info" role="button" data-toggle="m-popover" data-placement="bottom" data-trigger="focus" title="" data-content=@lr.description>
                                    View Description
                                </a>
                            </td>
                            <td>@lr.depositDate</td>
                            <td>
                                @if (Session["role"] == "Resource" && !lr.archived)
                                {
                                    <a href="@Url.Action("UpdateLeaveRequest", "Request", new {ID = @lr.idLeaveRequest})">
                                        <button class="btn btn-primary" type="button">Update</button>
                                    </a>
                                }
                                @if (Session["role"] == "Admin")
                                {
                                    <a href="@Url.Action("ArchiveLeaveRequest", "Request", new {ID = @lr.idLeaveRequest})">
                                        <button class="btn btn-warning" type="button">Archive</button>
                                    </a>
                                }
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>






